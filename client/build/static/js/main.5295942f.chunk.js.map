{"version":3,"sources":["component/TestEditor/index.js","App.js","index.js"],"names":["TOOLBAR_OPTIONS","header","list","script","indent","direction","size","color","background","font","align","TestEditor","useState","socket","setSocket","quill","setQuill","documentID","useParams","id","useEffect","s","io","disconnect","once","document","setContents","enable","emit","quillHandler","delta","oldDelta","source","on","off","updateContents","interval","setInterval","getContents","clearInterval","editorRef","useCallback","wrapper","innerHTML","editor","createElement","append","q","Quill","theme","modules","toolbar","scrollingContainer","disable","setText","ref","App","className","path","exact","to","uuidV4","ReactDOM","render","StrictMode","getElementById"],"mappings":"kPAOMA,EAAkB,CACtB,CAAC,OAAQ,SAAU,YAAa,UAChC,CAAC,aAAc,aAAc,QAAS,SACtC,CAAC,CAAEC,OAAQ,GAAK,CAAEA,OAAQ,IAC1B,CAAC,CAAEC,KAAM,WAAa,CAAEA,KAAM,WAC9B,CAAC,CAAEC,OAAQ,OAAS,CAAEA,OAAQ,UAC9B,CAAC,CAAEC,OAAQ,MAAQ,CAAEA,OAAQ,OAC7B,CAAC,CAAEC,UAAW,QACd,CAAC,CAAEC,KAAM,CAAC,SAAS,EAAO,QAAS,UACnC,CAAC,CAAEL,OAAQ,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAG,KAC9B,CAAC,CAAEM,MAAO,IAAM,CAAEC,WAAY,KAC9B,CAAC,CAAEC,KAAM,KACT,CAAC,CAAEC,MAAO,KACV,CAAC,UAwFYC,EArFI,WACjB,MAA4BC,mBAAS,MAArC,mBAAOC,EAAP,KAAeC,EAAf,KACA,EAA0BF,mBAAS,MAAnC,mBAAOG,EAAP,KAAcC,EAAd,KACYC,EAAeC,cAAnBC,GACRC,qBAAU,WACR,IAAMC,EAAIC,aAAG,KAEb,OADAR,EAAUO,GACH,WACLA,EAAEE,gBAEH,IAEHH,qBAAU,WACR,GAAa,MAATL,GAA2B,MAAVF,EAQrB,OANAA,EAAOW,KAAK,iBAAiB,SAACC,GAC5BV,EAAMW,YAAYD,GAClBV,EAAMY,YAGRd,EAAOe,KAAK,eAAgBX,GACrB,eACN,CAACJ,EAAQE,EAAOE,IAEnBG,qBAAU,WACR,GAAa,MAATL,GAA2B,MAAVF,EAArB,CAEA,IAAMgB,EAAe,SAACC,EAAOC,EAAUC,GACtB,SAAXA,GACJnB,EAAOe,KAAK,eAAgBE,IAK9B,OAFAf,EAAMkB,GAAG,cAAeJ,GAEjB,WACLd,EAAMmB,IAAI,cAAeL,OAE1B,CAAChB,EAAQE,IAEZK,qBAAU,WACR,GAAa,MAATL,GAA2B,MAAVF,EAArB,CAEA,IAAMgB,EAAe,SAACC,GACpBf,EAAMoB,eAAeL,IAKvB,OAFAjB,EAAOoB,GAAG,kBAAmBJ,GAEtB,WACLhB,EAAOqB,IAAI,kBAAmBL,OAE/B,CAAChB,EAAQE,IAEZK,qBAAU,WACR,GAAa,MAATL,GAA2B,MAAVF,EAArB,CAEA,IAAMuB,EAAWC,aAAY,WAC3BxB,EAAOe,KAAK,gBAAiBb,EAAMuB,iBA1DhB,KA6DrB,OAAO,WACLC,cAAcH,OAEf,CAACvB,EAAQE,IAEZ,IAAMyB,EAAYC,uBAAY,SAACC,GAC7B,GAAe,MAAXA,EAAJ,CACAA,EAAQC,UAAY,GACpB,IAAMC,EAASnB,SAASoB,cAAc,OACtCH,EAAQI,OAAOF,GACf,IAAMG,EAAI,IAAIC,IAAMJ,EAAQ,CAC1BK,MAAO,OACPC,QAAS,CACPC,QAASnD,GAEXoD,mBAAoB,yBAEtBL,EAAEM,UACFN,EAAEO,QAAQ,eACVtC,EAAS+B,MACR,IAEH,OAAO,qBAAK5B,GAAG,YAAYoC,IAAKf,K,wBC9EnBgB,MAjBf,WACE,OACE,qBAAKC,UAAU,MAAf,SACE,cAAC,IAAD,UACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAOC,KAAK,IAAIC,OAAK,EAArB,SACE,cAAC,IAAD,CAAUC,GAAE,oBAAeC,mBAE7B,cAAC,IAAD,CAAOH,KAAK,gBAAZ,SACE,cAAC,EAAD,cCbZI,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFvC,SAASwC,eAAe,W","file":"static/js/main.5295942f.chunk.js","sourcesContent":["/** @format */\r\nimport { useCallback, useEffect, useState } from \"react\";\r\nimport \"quill/dist/quill.snow.css\";\r\nimport Quill from \"quill\";\r\nimport \"./TestEditior.css\";\r\nimport { io } from \"socket.io-client\";\r\nimport { useParams } from \"react-router-dom\";\r\nconst TOOLBAR_OPTIONS = [\r\n  [\"bold\", \"italic\", \"underline\", \"strike\"], // toggled buttons\r\n  [\"blockquote\", \"code-block\", \"image\", \"video\"],\r\n  [{ header: 1 }, { header: 2 }], // custom button values\r\n  [{ list: \"ordered\" }, { list: \"bullet\" }],\r\n  [{ script: \"sub\" }, { script: \"super\" }], // superscript/subscript\r\n  [{ indent: \"-1\" }, { indent: \"+1\" }], // outdent/indent\r\n  [{ direction: \"rtl\" }], // text direction\r\n  [{ size: [\"small\", false, \"large\", \"huge\"] }], // custom dropdown\r\n  [{ header: [1, 2, 3, 4, 5, 6, false] }],\r\n  [{ color: [] }, { background: [] }], // dropdown with defaults from theme\r\n  [{ font: [] }],\r\n  [{ align: [] }],\r\n  [\"clean\"], // remove formatting button\r\n];\r\nconst SAVE_INTERVAL_MS = 4000;\r\nconst TestEditor = () => {\r\n  const [socket, setSocket] = useState(null);\r\n  const [quill, setQuill] = useState(null);\r\n  const { id: documentID } = useParams();\r\n  useEffect(() => {\r\n    const s = io(\"/\");\r\n    setSocket(s);\r\n    return () => {\r\n      s.disconnect();\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (quill == null || socket == null) return;\r\n\r\n    socket.once(\"load-document\", (document) => {\r\n      quill.setContents(document);\r\n      quill.enable();\r\n    });\r\n\r\n    socket.emit(\"get-document\", documentID);\r\n    return () => {};\r\n  }, [socket, quill, documentID]);\r\n\r\n  useEffect(() => {\r\n    if (quill == null || socket == null) return;\r\n\r\n    const quillHandler = (delta, oldDelta, source) => {\r\n      if (source !== \"user\") return;\r\n      socket.emit(\"send-changes\", delta);\r\n    };\r\n\r\n    quill.on(\"text-change\", quillHandler);\r\n\r\n    return () => {\r\n      quill.off(\"text-change\", quillHandler);\r\n    };\r\n  }, [socket, quill]);\r\n\r\n  useEffect(() => {\r\n    if (quill == null || socket == null) return;\r\n\r\n    const quillHandler = (delta) => {\r\n      quill.updateContents(delta);\r\n    };\r\n\r\n    socket.on(\"receive-changes\", quillHandler);\r\n\r\n    return () => {\r\n      socket.off(\"receive-changes\", quillHandler);\r\n    };\r\n  }, [socket, quill]);\r\n\r\n  useEffect(() => {\r\n    if (quill == null || socket == null) return;\r\n\r\n    const interval = setInterval(() => {\r\n      socket.emit(\"save-document\", quill.getContents());\r\n    }, SAVE_INTERVAL_MS);\r\n\r\n    return () => {\r\n      clearInterval(interval);\r\n    };\r\n  }, [socket, quill]);\r\n\r\n  const editorRef = useCallback((wrapper) => {\r\n    if (wrapper == null) return;\r\n    wrapper.innerHTML = \"\";\r\n    const editor = document.createElement(\"div\");\r\n    wrapper.append(editor);\r\n    const q = new Quill(editor, {\r\n      theme: \"snow\",\r\n      modules: {\r\n        toolbar: TOOLBAR_OPTIONS,\r\n      },\r\n      scrollingContainer: \"#scrolling-container\",\r\n    });\r\n    q.disable();\r\n    q.setText(\"Loading ...\");\r\n    setQuill(q);\r\n  }, []);\r\n\r\n  return <div id='container' ref={editorRef}></div>;\r\n};\r\n\r\nexport default TestEditor;\r\n","/** @format */\nimport TestEditor from \"./component/TestEditor\";\nimport \"./Assets/css/style.css\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from \"react-router-dom\";\nimport { v4 as uuidV4 } from \"uuid\";\nfunction App() {\n  return (\n    <div className='App'>\n      <Router>\n        <Switch>\n          <Route path='/' exact>\n            <Redirect to={`/document/${uuidV4()}`} />\n          </Route>\n          <Route path='/document/:id'>\n            <TestEditor />\n          </Route>\n        </Switch>\n      </Router>\n    </div>\n  );\n}\n\nexport default App;\n","/** @format */\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}